<div class="d-flex flex-column mb-2">
  <div *ngIf="anyMessagesPresent" class="my-2 mx-1">
    <div *ngIf="report.noCloseReceivedForStream" id="noCloseReceivedLabel" class="btn btn-static px-2">
      No close received for stream
    </div>
    <div *ngIf="report.streaming" id="waitingForMessageLabel"
         class="btn btn-static  px-2">
      {{report.waitingForStream ? 'Waiting for message to be' : 'Message is'}} captured asynchronously from
      a {{report.streaming.toLowerCase()}} stream
    </div>

    <div *ngIf="null === report.message" id="nullMessageLabel" class="btn btn-static  px-2">
      Message is null
    </div>

    <div *ngIf="'' === report.message" id="emptyMessageLabel" class="btn btn-static  px-2">
      Message is empty string
    </div>

    <div *ngIf="report.stubbed" id="stubbedMessageLabel" class="btn btn-static  px-2">
      Message is stubbed
    </div>

    <div *ngIf="null !== report.encoding" id="encodedMessageLabel" class="btn btn-static px-2">
      Message of type {{report.messageClassName}} is encoded to string using {{report.encoding}}
      <span *ngIf="this.report.showConverted">and displayed using Base64 decoded to byte array and byte array decoded to string using UTF-8 (toggle with Base64 button)</span>
    </div>

    <div *ngIf="report.preTruncatedMessageLength > 0"
         id="truncatedMessageLabel"
         class="btn btn-static  px-2">
      Message is truncated ( {{report.preTruncatedMessageLength -report.message.length}} characters removed)
    </div>

    <div *ngIf="null !==report.stubNotFound" id="stubNotFoundLabel" class="btn btn-static px-2">
      Could not find stub message for {{report.stubNotFound}}
    </div>
  </div>
  <div data-cy-metadata-table='table' class='metadata-table' id='displayedNodeTable' >
    <div class='table-row' *ngIf='!report.xml'>
      <div class="key">Type</div>
      <div class="value" [cdkCopyToClipboard]="report.type">{{report.type|checkpointType}}</div>
    </div>
    <div class='table-row' *ngIf="report.xml">
      <div class="key">Description</div>
      <div class="value" [cdkCopyToClipboard]="report.description">{{report.description}}</div>
    </div>
    <div class='table-row' *ngIf='!report.xml'>
      <div class="key">Thread name</div>
      <div class="value" [cdkCopyToClipboard]="report.threadName">{{ report.threadName}}</div>
    </div>
    <div class='table-row' *ngIf='!report.xml'>
      <div class="key">Source class name</div>
      <div class="value" [cdkCopyToClipboard]="report.sourceClassName">{{ report.sourceClassName}}</div>
    </div>
    <div class='table-row' *ngIf='!report.xml'>
      <div class="key">Message class name</div>
      <div class="value" [cdkCopyToClipboard]="report.messageClassName">{{ report.messageClassName}}</div>
    </div>
    <div class='table-row' *ngIf='!report.xml'>
      <div class="key">Path</div>
      <div class="value" [cdkCopyToClipboard]="report.path">{{ report.path}}</div>
    </div>
    <div class='table-row' *ngIf='!report.xml'>
      <div class="key">CheckpointUID</div>
      <div class="value" [cdkCopyToClipboard]="report.uid">{{ report.uid}}</div>
    </div>
    <div class='table-row' *ngIf='!report.xml'>
      <div class="key">Level</div>
      <div class="value" [cdkCopyToClipboard]="report.level">{{ report.level}}</div>
    </div>
    <div class='table-row' *ngIf='!report.xml'>
      <div class="key">Encoding</div>
      <div class="value" [cdkCopyToClipboard]="report.encoding">{{ report.encoding}}</div>
    </div>
    <div class='table-row' *ngIf='!report.xml'>
      <div class="key">Number of characters</div>
        @if(report.message && report.message.length > 0) {
          <div class="value" [cdkCopyToClipboard]="report.message.length">{{ report.message.length }}</div>
        }
        @else {
          <div class="value"></div>
        }
    </div>
    <div class='table-row' *ngIf='report.xml'>
      <div class="key">Transformation</div>
      <div class="value" [cdkCopyToClipboard]="report.transformation">{{ report.transformation}}</div>
    </div>
    <div class='table-row' *ngIf='report.xml'>
      <div class="key">StorageId</div>
      <div class="value" [cdkCopyToClipboard]="report.storageId">{{ report.storageId}}</div>
    </div>
    <div class='table-row' *ngIf='report.xml'>
      <div class="key">Storage</div>
      <div class="value" [cdkCopyToClipboard]="report.storage">{{ report.storage}}</div>
    </div>
    <div class='table-row' *ngIf='report.xml'>
      <div class="key">Estimated memory usage</div>
      <div class="value" [cdkCopyToClipboard]="report.estimatedMemoryUsage">{{ report.estimatedMemoryUsage}}</div>
    </div>
    <div class='table-row' *ngIf='report.xml'>
      <div class="key">CorrelationId</div>
      <div class="value" [cdkCopyToClipboard]="report.correlationId">{{ report.correlationId}}</div>
    </div>
  </div>
</div>
