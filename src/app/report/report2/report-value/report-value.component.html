<div [style.height]="height + 'px'">
  <app-report-buttons
    [state$]="buttonStateSubject"
    (reportCommand)="onButton($event)"
    [originalReportStubStrategy$]="originalReportStubStrategySubject"
    (reportStubStrategyChange)="onReportStubStrategyChange($event)">
  </app-report-buttons>
  <app-report-alert-message2 [labels]="labels"></app-report-alert-message2>
  <as-split direction="vertical">
    <as-split-area class="split-size" [size]="100">
      <div class="form-group">
        <label>Name</label>
        <input [(ngModel)]="editedName" data-cy-report-edit-form="name" class="form-control" placeholder="Name" (input)="onInputChange()">
      </div>
      <div class="form-group">
        <label>Description</label>
        <input [(ngModel)]="editedDescription" class="form-control" placeholder="Description" (input)="onInputChange()">
      </div>
      <div class="form-group">
        <label>Path</label>
        <input [(ngModel)]="editedPath" class="form-control" placeholder="/path/to/report/" (input)="onInputChange()">
      </div>
      @for (variable of editedVariables; track index; let index = $index) {
        <div class="form-group row">
          <label class="col-sm-1 control-label label-height-30">
            @if (index === 0) {
              <span>Variables:</span>
            }
          </label>
          <div class="col-sm-5">
            <input
              [(ngModel)]="variable.name"
              [ngClass]="{'is-invalid': duplicateVariables.has(index)}"
              class="form-control" placeholder="Name"
              (input)="onInputChange()"
              (blur)="addEmptyVariableWhenNeeded()">
          </div>
          <div class="col-sm-5">
            <input [(ngModel)]="variable.value" [ngClass]="{'is-invalid': duplicateVariables.has(index)}" class="form-control" placeholder="Value" (input)="onInputChange()">
          </div>
          @if (index < editedVariables.length - 1) {
            <div class="col-sm-1">
              <button type="button" class="btn btn-danger"><i class="fa fa-trash" (click)="removeVariable(index)"></i></button>
            </div>
          }
        </div>
      }
      <div id="form-group-transformation" class="form-group">
        <div class="d-flex flex-row align-items-center">
          <label>Transformation</label>
          <button id="copyTransformationButton"
            data-cy-copy-transformation-to-report-form
            class="btn btn-info h-fit"
            title="Copy transformation"
            (click)="copyDefaultTransformation()">
            Copy default transformation
          </button>
        </div>
        <div class="monaco-area" [style.height]="monacoEditorInitialHeight + 'px'">
          <app-monaco-editor
            [options]="monacoOptions"
            [readOnlyRequest$]="transformationReadOnlySubject"
            [editorContentRequest$]="transformationContentRequestSubject"
            (actualEditorContentsChange)="onTransformationEdited($event)"/>
        </div>
      </div>
      <div id="reportXmlHeader">Report XML</div>
      <div class="monaco-area" [style.height]="monacoEditorInitialHeight + 'px'">
        <app-monaco-editor
          data-cy-element-name="reportEditor"
          [options]="monacoOptions"
          [editorContentRequest$]="reportContentRequestSubject"
          [readOnlyRequest$]="reportReadOnlySubject">
        </app-monaco-editor>
      </div>
    </as-split-area>
  </as-split>
</div>
<app-difference2-modal></app-difference2-modal>
