<div data-cy-debug-editor="buttons" class="buttons">
  @if (state.isCheckpoint) {
    <section class="buttons button-section">
      <p class="button-section-title">Checkpoint</p>
      @if (state.saveAllowed) {
      <button
        data-cy-report="save"
        class="btn btn-info"
        title="Save"
        (click)="save()"
      ><i class="fa fa-save"></i></button>
      }
      <button
        data-cy-debug-editor="makeNull"
        title="Make checkpoint value null"
        class="btn btn-info"
        (click)="makeNull()"
      >make null</button>
      <div class="w-fit mx-1 my-0">
        <select #checkpointStubStrategy id="checkpointStubStrategy" class="form-control" [(ngModel)]="currentCheckpointStubStrategyStr"
                (ngModelChange)="onCheckpointStubStrategyChange($event)">
          @for (stubOptionStr of StubStrategy.checkpoints; track stubOptionStr) {
            <option [ngValue]="stubOptionStr" [selected]="currentCheckpointStubStrategyStr === stubOptionStr">{{ stubOptionStr }}</option>
          }
        </select>
      </div>
    </section>
    <span class="button-divider">&#124;</span>
  }
  <section class="buttons button-section">
    <p class="button-section-title">Report{{ getReadOnly() }}</p>
    @if (state.isReport && state.saveAllowed) {
    <button
      data-cy-report="save"
      class="btn btn-info"
      title="Save"
      (click)="save()"
    ><i class="fa fa-save"></i></button>
    }
    <button
      data-cy-debug-editor="copy"
      class="btn btn-info"
      title="Copy report to test tab"
      (click)="copyReport()"
    ><i class="fa fa-copy"></i></button>
    <div class="w-fit mx-1 my-0">
      <select #reportStubStrategy class="form-control"
        [(ngModel)]="currentReportStubStrategy"
        (ngModelChange)="onReportStubStrategyChange($event)">
        @for (strategy of StubStrategy.report; track strategy) {
          <option [ngValue]="strategy" [selected]="currentReportStubStrategy === strategy">{{ strategy }}</option>
        }
      </select>
    </div>
    <button
      data-cy-report="rerun"
      class="btn btn-info"
      [title]="'Rerun original report'"
      [disabled]="state.isEdited"
      (click)="rerun()"
    >Rerun
    </button>
    @if (appVariablesService.getVariable('customReportActionButtonText') !== null) {
      <button data-cy-test="customReportAction" class="btn btn-info" [title]="appVariablesService.getVariable('customReportActionButtonText')"
          (click)="processCustomReportAction()">
        {{ appVariablesService.getVariable("customReportActionButtonText") }}
    </button>
    }
  </section>
  @if (rerunResult) {
    <div class="rerun-result" [style.color]="rerunResult.equal ? 'green' : 'red'">{{ rerunResult.info }}</div>
  }
</div>
