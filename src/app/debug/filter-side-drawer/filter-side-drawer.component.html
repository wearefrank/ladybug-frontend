<div @removeTrigger class="filter-vertical-panel" data-cy-debug="filter-side-drawer" *ngIf="shouldShowFilter">
  <label class="filter-label">Filter</label>
  <div class="filter-input-container">
    @for (metadataName of metadataNames; track metadataNames) {
      <div class="input-container">
        <label class="metadata-input-label">{{ metadataName }}</label>
        <input
          class="metadata-input"
          type="text"
          [title]="metadataName"
          [(ngModel)]="filters[metadataName]"
          [matAutocomplete]="auto"
          [placeholder]="'Filter for ' + metadataName"
          (ngModelChange)="updateFilter($event, metadataName)"
          data-cy-debug="tableFilter">
        <mat-autocomplete #auto="matAutocomplete" (optionSelected)="updateFilter($event.option.value, metadataName)">
          <mat-option [value]="''" class="filter-option" data-cy-debug="matAutocompleteEmptyOption"></mat-option>
          @for (option of currentRecords.get(metadataName.toLocaleLowerCase()); track currentRecords) {
            <mat-option [value]="option" class="filter-option" data-cy-debug="matAutocompleteOption">{{option}}</mat-option>
          }
        </mat-autocomplete>
      </div>
    }
  </div>
  <div class="btn-container">
    <button class="close-filter-btn btn btn-info" (click)="closeFilter()" data-cy-debug="close-filter-btn">Close</button>
    <button class="clear-filter-btn btn btn-info" (click)="filterService.resetFilter()" data-cy-debug="clear-filter-btn">Clear</button>
  </div>
</div>
